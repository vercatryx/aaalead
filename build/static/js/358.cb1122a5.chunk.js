"use strict";(self.webpackChunklead_reports=self.webpackChunklead_reports||[]).push([[358],{358(e,n,s){s.d(n,{getSignedUrl:()=>h});var t=s(9379),i=s(5330);var a=s(6842),r=s(6151),o=s(3986),l=s(4705),d=s(9907);const c=["unsignableHeaders","hoistableHeaders","unhoistableHeaders"],u=["unsignableHeaders","hoistableHeaders","unhoistableHeaders"];class g{constructor(e){(0,l.A)(this,"signer",void 0);const n=(0,t.A)({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1,applyChecksum:e.applyChecksum||!1},e);this.signer=new d.W(n)}presign(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unsignableHeaders:s=new Set,hoistableHeaders:i=new Set,unhoistableHeaders:a=new Set}=n,r=(0,o.A)(n,c);return this.prepareRequest(e,{unsignableHeaders:s,unhoistableHeaders:a,hoistableHeaders:i}),this.signer.presign(e,(0,t.A)({expiresIn:900,unsignableHeaders:s,unhoistableHeaders:a},r))}presignWithCredentials(e,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{unsignableHeaders:i=new Set,hoistableHeaders:a=new Set,unhoistableHeaders:r=new Set}=s,l=(0,o.A)(s,u);return this.prepareRequest(e,{unsignableHeaders:i,unhoistableHeaders:r,hoistableHeaders:a}),this.signer.presignWithCredentials(e,n,(0,t.A)({expiresIn:900,unsignableHeaders:i,unhoistableHeaders:r},l))}prepareRequest(e){let{unsignableHeaders:n=new Set,unhoistableHeaders:s=new Set,hoistableHeaders:t=new Set}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.add("content-type"),Object.keys(e.headers).map(e=>e.toLowerCase()).filter(e=>e.startsWith("x-amz-server-side-encryption")).forEach(e=>{t.has(e)||s.add(e)}),e.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD";const i=e.headers.host,a=e.port,r="".concat(e.hostname).concat(null!=e.port?":"+a:"");(!i||i===e.hostname&&null!=e.port)&&(e.headers.host=r)}}const h=async function(e,n){let s,o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("function"===typeof e.config.endpointProvider){var d;const i=null===(d=(await(0,a.r)(n.input,n.constructor,e.config)).properties)||void 0===d||null===(d=d.authSchemes)||void 0===d?void 0:d[0];var c;if("sigv4a"===(null===i||void 0===i?void 0:i.name))o=null===i||void 0===i||null===(c=i.signingRegionSet)||void 0===c?void 0:c.join(",");else o=null===i||void 0===i?void 0:i.signingRegion;s=new g((0,t.A)((0,t.A)({},e.config),{},{signingName:null===i||void 0===i?void 0:i.signingName,region:async()=>o}))}else s=new g(e.config);const u=e.middlewareStack.clone();u.addRelativeTo((e,n)=>async e=>{var i,a,d;const{request:c}=e;if(!r.K.isInstance(c))throw new Error("Request to be presigned is not an valid HTTP request.");let u;delete c.headers["amz-sdk-invocation-id"],delete c.headers["amz-sdk-request"],delete c.headers["x-amz-user-agent"];const g=(0,t.A)((0,t.A)({},l),{},{signingRegion:null!==(i=null!==(a=l.signingRegion)&&void 0!==a?a:n.signing_region)&&void 0!==i?i:o,signingService:null!==(d=l.signingService)&&void 0!==d?d:n.signing_service});return u=n.s3ExpressIdentity?await s.presignWithCredentials(c,n.s3ExpressIdentity,g):await s.presign(c,g),{response:{},output:{$metadata:{httpStatusCode:200},presigned:u}}},{name:"presignInterceptMiddleware",relation:"before",toMiddleware:"awsAuthMiddleware",override:!0});const h=n.resolveMiddleware(u,e.config,{}),{output:p}=await h({input:n.input}),{presigned:v}=p;return function(e){const{port:n,query:s}=e;let{protocol:t,path:a,hostname:r}=e;t&&":"!==t.slice(-1)&&(t+=":"),n&&(r+=":".concat(n)),a&&"/"!==a.charAt(0)&&(a="/".concat(a));let o=s?(0,i.G)(s):"";o&&"?"!==o[0]&&(o="?".concat(o));let l="";if(null!=e.username||null!=e.password){var d,c;const n=null!==(d=e.username)&&void 0!==d?d:"",s=null!==(c=e.password)&&void 0!==c?c:"";l="".concat(n,":").concat(s,"@")}let u="";return e.fragment&&(u="#".concat(e.fragment)),"".concat(t,"//").concat(l).concat(r).concat(a).concat(o).concat(u)}(v)}}}]);
//# sourceMappingURL=358.cb1122a5.chunk.js.map